// 中文字体优化配置

// 字体栈
$chinese-font-stack: 
  -apple-system,
  BlinkMacSystemFont,
  "Segoe UI",
  "PingFang SC",
  "Hiragino Sans GB",
  "Microsoft YaHei",
  "微软雅黑",
  "Helvetica Neue",
  Helvetica,
  Arial,
  "WenQuanYi Micro Hei",
  "Noto Sans CJK SC",
  "Source Han Sans CN",
  sans-serif;

// 全局字体设置
*:not(.fa):not(.fas):not(.far):not(.fab):not(.fal):not(.fad):not([class*="fa-"]) {
  font-family: $chinese-font-stack !important;
}

body {
  // 优化中文字体栈 - 优先使用系统字体和现代中文字体
  font-family: $chinese-font-stack !important;
  
  // 字体渲染优化
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: optimizeLegibility !important;
  
  // 中文排版优化
  line-height: 1.8;
  letter-spacing: 0;
  word-spacing: 0;
}

// 导航栏字体优化
.navigation {
  a,
  span {
    font-family: $chinese-font-stack !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    text-rendering: optimizeLegibility !important;
  }
  
  .fa, .fas, .far, .fab, .fal, .fad,
  [class*="fa-"] {
    font-family: var(--fa-style-family, "Font Awesome 6 Free") !important;
    font-family: 'Font Awesome 6 Free' !important;
    font-family: 'Font Awesome 6 Brands' !important;
  }
}

// 标题字体优化
h1, h2, h3, h4, h5, h6 {
  font-family: $chinese-font-stack !important;
  font-weight: 600;
  line-height: 1.5;
  letter-spacing: 0.02em;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

// 段落优化
p {
  font-family: $chinese-font-stack !important;
  line-height: 1.9;
  text-align: justify;
  text-justify: inter-ideograph;
  word-break: break-word;
  overflow-wrap: break-word;
  letter-spacing: 0;
  word-spacing: 0;
}

// 列表优化
ul, ol {
  font-family: $chinese-font-stack !important;
  line-height: 1.9;
  
  li {
    margin: 0.5em 0;
    line-height: 1.9;
  }
}

// 文章内容区域优化
.post-content,
.content article,
article {
  text-align: justify;
  text-justify: inter-ideograph;
  
  p {
    text-align: justify;
    text-justify: inter-ideograph;
  }
}

// 移动端优化
@media only screen and (max-width: 768px) {
  body {
    line-height: 1.7;
    letter-spacing: 0;
  }
  
  p {
    line-height: 1.8;
    text-align: left; // 移动端左对齐更易读
    text-justify: auto;
  }
  
  .post-content,
  .content article,
  article {
    text-align: left;
    
    p {
      text-align: left;
      text-justify: auto;
    }
  }
}

// 深色模式字体渲染优化
.colorscheme-dark body,
.colorscheme-dark .navigation a,
.colorscheme-dark .navigation span {
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

// 确保所有文本元素都使用优化的字体 
div:not([class*="fa-"]):not(.fa):not(.fas):not(.far):not(.fab),
span:not([class*="fa-"]):not(.fa):not(.fas):not(.far):not(.fab),
a:not([class*="fa-"]):not(.fa):not(.fas):not(.far):not(.fab),
p, li, td, th, label, input, textarea, select, button {
  font-family: $chinese-font-stack !important;
}

.fas, .fa-solid {
  font-family: 'Font Awesome 6 Free' !important;
}

.far, .fa-regular {
  font-family: 'Font Awesome 6 Free' !important;
}

.fab, .fa-brands {
  font-family: 'Font Awesome 6 Brands' !important;
}

.fa {
  font-family: 'Font Awesome 6 Free' !important;
}

[class*="fa-"] {
  font-family: 'Font Awesome 6 Free' !important;
}

[class*="fa-brands"],
.fab {
  font-family: 'Font Awesome 6 Brands' !important;
}